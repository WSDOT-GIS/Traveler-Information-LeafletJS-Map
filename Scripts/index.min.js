requirejs.config({baseUrl:"Scripts",paths:{leaflet:"//cdn.leafletjs.com/leaflet-0.7.2/leaflet",markercluster:"Leaflet.markercluster/dist/leaflet.markercluster"},shim:{markercluster:["leaflet"]}});window.Worker?require(["leaflet","alertUtils","markercluster"],function(n,t){"use strict";function b(){function f(n){var t,r,u,f,i;return t=document.createElement("div"),r=document.createElement("p"),r.textContent=n.properties.Title,t.appendChild(r),n.properties.Description&&(u=document.createElement("p"),u.innerText=n.properties.Description,t.appendChild(u)),n.properties.CameraOwner&&(f=["Courtesy of ",n.properties.CameraOwner].join(""),n.properties.OwnerURL?(i=document.createElement("a"),i.href=n.properties.OwnerURL):i=document.createElement("p"),i.innerText=f,t.appendChild(i)),t}function e(n){var r,i,t;r=n.popup._content;t=n.target.feature.properties;t.ImageURL&&r&&(i=document.createElement("img"),i.src=t.ImageURL,i.width=t.ImageWidth||null,i.height=t.ImageHeight||null,i.alt=t.Description||t.Title||"Camera Image",r.appendChild(i))}function o(t,i){return n.marker(i,{icon:r,title:t.properties.Title}).addOneTimeEventListener("popupopen",e)}function s(n,t){t.bindPopup(f(n))}function u(t){return n.geoJson(t,{pointToLayer:o,onEachFeature:s})}var t,i,r;return i=new Worker("Scripts/tasks/traffic_task.min.js"),r=n.icon({iconUrl:"images/icons/camera.png",iconSize:[30,22]}),i.addEventListener("message",function(i){var r=i.data;r&&(t?(t.clearLayers(),t.addLayer(u(r))):(t=new n.MarkerClusterGroup,t.addLayer(u(r)),h.addOverlay(t,"Cameras")))},!1),i.postMessage({action:"start",type:"HighwayCameras",ticks:864e5}),i}function k(n){var u,f,i,t,r;if(n&&n.properties){u=document.createElement("table");for(t in n.properties)n.properties.hasOwnProperty(t)&&(r=n.properties[t],r===null||r===""||t==="Longitude"||t==="Latitude"||/\w+(?:MaxAxle)|(?:In(?:(?:Inches)|(?:Pounds)))/i.test(t)&&!r||(f=u.insertRow(),i=document.createElement("th"),i.innerText=t,f.appendChild(i),i=f.insertCell(1),i.innerText=String(n.properties[t])))}return u}function d(t,i){return n.marker(i)}function e(n,t){t.bindPopup(k(n))}function i(t,i,r,u,f){var o,s,c;return s=new Worker(f||"Scripts/tasks/traffic_task.min.js"),c={pointToLayer:d,onEachFeature:e},s.addEventListener("message",function(i){var r=i.data;r&&(o?(o.clearLayers(),o.addLayer(n.geoJson(r,u||c))):(o=n.geoJson(r,u||c),h.addOverlay(o,t)))},!1),s.addEventListener("error",function(n){window.console&&window.console.error&&window.console.error("task error",n)}),s.postMessage({action:"start",type:i,ticks:r}),s}function g(n){return!n||n==="Unknown"?"white":n===1||n==="WideOpen"?"#0f0":n===2||n==="Moderate"?"yellow":n===3||n==="Heavy"?"red":n===4||n==="StopAndGo"?"black":"gray"}var c,o,l,s,a,v,y,p,u,f,r,h,w;u='Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap<\/a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA<\/a>';f=u+'<p>Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest<\/a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png"><\/p>';r=u+'<p>Tiles Courtesy of <a href="http://www.thunderforest.com/" target="_blank">Thunderforest<\/a><\/p>';o=n.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:u,maxZoom:18});l=n.tileLayer("http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpg",{subdomains:["otile1","otile2","otile3","otile4"],attribution:f,maxZoom:18});s=n.tileLayer("http://{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",{subdomains:["otile1","otile2","otile3","otile4"],attribution:f,maxZoom:18});s=n.tileLayer("http://{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",{subdomains:["otile1","otile2","otile3","otile4"],attribution:f,maxZoom:18});a=n.tileLayer("http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",{attribution:r,maxZoom:18});v=n.tileLayer("http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png",{attribution:r,maxZoom:18});y=n.tileLayer("http://{s}.tile3.opencyclemap.org/landscape/{z}/{x}/{y}.png",{attribution:r,maxZoom:18});p=n.tileLayer("http://{s}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png",{attribution:r,maxZoom:18});c=n.map("map",{center:[47.413220330159461,-120.80566406246835],zoom:7,layers:[o]}).locate({setView:!0,maxZoom:16});h=n.control.layers({OpenStreetMap:o,"MapQuest OSM":l,"MapQest Open Aerial":s,OpenCycleMap:a,"OpenCycleMap Transport":v,"OpenCycleMap Landscape":y,"OpenCycleMap Outdoors":p}).addTo(c);w=new t.SignIcons;b();i("Alerts","HighwayAlerts",6e4,{pointToLayer:function(t,i){var r;return r=w.GetIcon(t),n.marker(i,{icon:r})},onEachFeature:function(n,i){i.bindPopup(t.createAlertContent(n))}});i("Traffic Flow","TrafficFlow",6e4,{pointToLayer:function(t,i){return n.circleMarker(i,{radius:5,fillOpacity:1,color:"black",fillColor:g(t.properties.FlowReadingValue)})},onEachFeature:e});i("Travel Times","TravelTimes",6e4,{pointToLayer:function(t,i){var u=t.properties.CurrentTime<t.properties.AverageTime?"below-average":t.properties.CurrentTime>t.properties.AverageTime?"above-average":null,r="travel-times-icon";return u&&(r=[r,u].join(" ")),n.marker(i,{icon:n.divIcon({className:r,html:"<div>"+String(t.properties.CurrentTime)+"&rsquo;<\/div>"})})},onEachFeature:e});i("Border Crossings","BorderCrossings",864e5,{pointToLayer:function(t,i){return n.marker(i,{icon:n.divIcon({className:"border-crossings-icon",html:"<div>"+String(t.properties.WaitTime)+"&rsquo;<\/div>"})})},onEachFeature:e});i("CV Restrictions","CVRestrictions",864e5);i("Pass Conditions","MountainPassConditions",36e5)}):document.body.innerHTML="<p>This page uses <a href='http://caniuse.com/#feat=webworkers'>WebWorkers<\/a>, which your browser does not appear to support. Please upgrade to <a href='http://caniuse.com/#feat=webworkers'>one that does<\/a>.<\/p>";
/*
//# sourceMappingURL=index.min.js.map
*/